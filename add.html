<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>إرسال بلاغ جديد - BLACK LIST</title>
    <style>
        :root { --accent: #e74c3c; --bg: #000; --card: #111; --text: #fff; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 20px; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        
        .form-container { width: 100%; max-width: 400px; background: var(--card); padding: 30px; border-radius: 25px; box-shadow: 0 10px 40px rgba(231, 76, 60, 0.1); border: 1px solid #222; }
        .header { text-align: center; margin-bottom: 25px; }
        .header h1 { font-size: 24px; margin: 0; color: var(--accent); }
        .header p { color: #888; font-size: 13px; margin-top: 5px; }

        .input-group { margin-bottom: 15px; }
        .input-group label { display: block; margin-bottom: 8px; font-size: 13px; color: #bbb; }
        .input-group input, .input-group select { width: 100%; padding: 12px 15px; background: #1a1a1a; border: 1px solid #333; border-radius: 12px; color: #fff; font-size: 15px; box-sizing: border-box; outline: none; transition: 0.3s; }
        .input-group input:focus { border-color: var(--accent); background: #222; }

        .btn-submit { width: 100%; background: var(--accent); color: white; border: none; padding: 15px; border-radius: 12px; font-size: 16px; font-weight: bold; cursor: pointer; transition: 0.3s; margin-top: 10px; }
        .btn-submit:active { transform: scale(0.98); opacity: 0.8; }
        
        #response-msg { text-align: center; margin-top: 15px; font-size: 14px; display: none; padding: 10px; border-radius: 8px; }
        .success { background: rgba(39, 174, 96, 0.2); color: #27ae60; }
        .error { background: rgba(231, 76, 60, 0.2); color: #e74c3c; }

        .back-link { display: block; text-align: center; margin-top: 20px; color: #666; text-decoration: none; font-size: 13px; }
    </style>
</head>
<body>

<div class="form-container">
    <div class="header">
        <h1>بلاغ جديد</h1>
        <p>يرجى إدخال بيانات الجهاز المفقود بدقة</p>
    </div>

    <form id="addForm">
        <div class="input-group">
            <label>شركة الجهاز</label>
            <input type="text" name="brand" placeholder="مثلاً: iPhone, Samsung" required>
        </div>

        <div class="input-group">
            <label>الموديل</label>
            <input type="text" name="model" placeholder="مثلاً: 14 Pro Max" required>
        </div>

        <div class="input-group">
            <label>رقم الـ IMEI (15 رقم)</label>
            <input type="number" name="imei" placeholder="أدخل الرقم التسلسلي" required>
        </div>

        <div class="input-group">
            <label>لون الجهاز</label>
            <input type="text" name="color" placeholder="مثلاً: أسود، فضي">
        </div>

        <div class="input-group">
            <label>رقم هاتف للتواصل</label>
            <input type="tel" name="phone" placeholder="رقم صاحب الجهاز" required>
        </div>

        <button type="submit" class="btn-submit" id="submitBtn">إرسال البلاغ للمراجعة</button>
    </form>

    <div id="response-msg"></div>

    <a href="index.html" class="back-link">⬅️ العودة للرئيسية</a>
</div>

<script>
    const scriptUrl = 'https://script.google.com/macros/s/AKfycbyS8x7lZ40mEzbgP3tOw56ZxHnCd2XUk2dC7vdbma4J8zVDlkUkrSgivf3HApBowocjSg/exec';
    const form = document.getElementById('addForm');
    const msg = document.getElementById('response-msg');
    const btn = document.getElementById('submitBtn');

    form.onsubmit = async (e) => {
        e.preventDefault();
        btn.disabled = true;
        btn.innerText = "جاري الإرسال...";
        msg.style.display = 'none';

        const formData = new FormData(form);
        const params = new URLSearchParams(formData).toString();

        try {
            // إرسال البيانات باستخدام POST للسكريبت
            await fetch(scriptUrl, {
                method: 'POST',
                mode: 'no-cors',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: params
            });

            // بما أننا نستخدم no-cors، نفترض النجاح إذا لم يحدث خطأ في الاتصال
            msg.className = 'success';
            msg.innerText = "✅ تم إرسال البلاغ بنجاح! سيتم فحص الطلب ونشره قريباً.";
            msg.style.display = 'block';
            form.reset();
        } catch (error) {
            msg.className = 'error';
            msg.innerText = "❌ حدث خطأ في الاتصال. حاول مرة أخرى.";
            msg.style.display = 'block';
        } finally {
            btn.disabled = false;
            btn.innerText = "إرسال البلاغ للمراجعة";
        }
    };
</script>

</body>
</html>
