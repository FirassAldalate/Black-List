<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© - Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</title>
    <style>
        :root { --accent: #e74c3c; --bg: #1a1a1a; --success: #27ae60; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); margin: 0; padding: 15px; display: flex; justify-content: center; }
        .container { width: 100%; max-width: 450px; background: white; padding: 25px; border-radius: 30px; box-shadow: 0 15px 50px rgba(0,0,0,0.3); }
        .header { text-align: center; margin-bottom: 20px; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        .header h1 { font-size: 22px; margin: 0; color: #000; }
        
        #status { text-align: center; font-size: 13px; font-weight: bold; margin-bottom: 15px; color: #666; }
        
        .pending-card { background: #fff; border-radius: 20px; padding: 18px; margin-bottom: 15px; border: 1px solid #eee; box-shadow: 0 5px 15px rgba(0,0,0,0.05); animation: fadeIn 0.5s ease; }
        .info-item { margin-bottom: 8px; font-size: 14px; display: flex; justify-content: space-between; border-bottom: 1px dashed #f0f0f0; padding-bottom: 5px; }
        .info-item b { color: var(--accent); }
        .info-item span { color: #333; font-weight: 600; }

        .btn-approve { width: 100%; background: var(--success); color: white; border: none; padding: 15px; border-radius: 15px; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 10px; transition: 0.3s; }
        .btn-approve:active { transform: scale(0.95); }
        .btn-approve:disabled { background: #ccc; cursor: not-allowed; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .no-data { text-align: center; padding: 40px; color: #888; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©</h1>
    </div>

    <div id="status">ğŸ”„ Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø§Ù„Ø·Ù„Ø¨Ø§Øª...</div>
    <div id="pendingList"></div>
    
    <a href="index.html" style="display:block; text-align:center; margin-top:20px; color:#888; text-decoration:none; font-size:13px;">â¬…ï¸ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
</div>

<script>
    // Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ø¹ Ø§Ù„Ù€ GID Ø§Ù„Ø®Ø§Øµ Ø¨ÙˆØ±Ù‚Ø© Pending Ø§Ù„Ø°ÙŠ Ø£Ø±Ø³Ù„ØªÙ‡
    const pendingUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSF5W0EW-E_36UGUSpTWJkXx7gaLqjUbyz90syivKGp9D4GFWIm_yQmQxaNo_2lUmN1pM0BjH4bQPnI/pub?gid=341654715&single=true&output=csv';
    
    // Ø§Ø³ØªØ¨Ø¯Ù„ Ø§Ù„Ø±Ø§Ø¨Ø· Ø£Ø¯Ù†Ø§Ù‡ Ø¨Ø±Ø§Ø¨Ø· Ø§Ù„Ù€ Web App Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ø´Ø± (Deploy)
    const scriptUrl = 'Ø¶Ø¹_Ø±Ø§Ø¨Ø·_Ø§Ù„ÙˆÙŠØ¨_Ø¢Ø¨_Ù‡Ù†Ø§';

    async function loadPending() {
        const listDiv = document.getElementById('pendingList');
        const statusDiv = document.getElementById('status');
        
        try {
            const response = await fetch(pendingUrl + "&cache=" + new Date().getTime());
            const data = await response.text();
            const rows = data.
                    <button class="btn-approve" onclick="approveRow(${index + 2}, this)">âœ… Ù…ÙˆØ§ÙÙ‚Ø© ÙˆÙ†Ù‚Ù„ Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
                `;
                list.appendChild(div);
            });
        } catch (e) {
            document.getElementById('status').innerHTML = "ğŸ”´ ÙØ´Ù„ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª";
        }
    }

    async function approveRow(rowNum, btn) {
        btn.disabled = true;
        btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù†Ù‚Ù„...";
        
        // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª Ù„ÙŠØ¶Ø¹ "Ù†Ø¹Ù…" ÙÙŠ Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ÙˆÙŠÙ‚ÙˆÙ… Ø¨Ø§Ù„Ù†Ù‚Ù„
        try {
            await fetch(`${scriptUrl}?action=approve&row=${rowNum}`);
            btn.parentElement.style.display = 'none';
            alert("ØªÙ… Ù†Ù‚Ù„ Ø§Ù„Ø¨Ù„Ø§Øº Ø¨Ù†Ø¬Ø§Ø­!");
        } catch (e) {
            alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†Ù‚Ù„");
            btn.disabled = false;
        }
    }

    loadPending();
</script>
</body>
</html>
